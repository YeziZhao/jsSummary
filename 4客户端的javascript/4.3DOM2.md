DOM2和DOM3拓展了DOM API.我们这里主要是针对HTML讲解。
# DOM 变化
## DocumentType 类型
- publicId：文档声明中的第一个信息段
- systemId：文档声明中的第一个信息段
- internalSubset: xml中使用的比较多
```html
<!DOCTYPE HTML PUBLIC "-//W3C/DTD HTML 4.0.1//EN" "http://www.w3.org/TR/html14/strict.dtd"> 
```
```javascript
console.log(document.publicId); // "-//W3C/DTD HTML 4.0.1//EN"
console.log(document.systemId); // "http://www.w3.org/TR/html14/strict.dtd"
```

## Document类型变化
- importNode(copyNode, bool): 从一个文档中取得一个节点(新节点，类似于Node的cloneNode方法)，然后倒入另外一个文档，成为新文档结构的一部分。当取得节点的时候。注意如果使用appendChild()传入的节点如果属于不同文档，则会抛出错误。第一个参数：需要复制的节点。第二个参数：是否复制子节点。
- defaultView: 保存一个指针，指向给定的文档窗口。 
- parentWindow: IE使用parentWindow。等价于defaultView
- document.implementation身上两个方法，用于创建新的文档。
    1. createDocumentType(fileTypeName, publicId, systemId): 文档类型名称，publicId, systemId
    1. createDocument(nameSpaceURI, fileTagName, fileType): namespaceURI,文档元素的标签名，新建文档的文档类型
    1. createHTMLDocument(): 创建一个完整的HTML文档。包括 <html> <head> <title> <body>。
```javascript

// 方法在XML中用的比较多
var newNode = document.importNode(oldNode, true);
document.body.appendChild(newNode);

var parentWIndow = document.defaultView || document.parentWindow;

// 创建一个HTML 4.0.1 Strict文档
var docType = document.implementation.createDocumentType('html', "-//W3C/DTD HTML 4.0.1//EN", "http://www.w3.org/TR/html14/strict.dtd");
var doc = document.implementation.createDocument("http://www.w3.org/1999/xhtml", "html", docType);

// 返回一个完整的HTML 文档，并且将title设置为title name
var doc2 = document.implementation.createHTMLDocument('title name');
console.log(doc2.title); // title name
console.log(typeof doc2.body); // object
```

## Node节点变化
- isSupport(feature, version):  检测是否支持feature特性的version版本
- isSameNode(node): 相同返回true,是同一个节点
- isEqualNode(node): 相等返回true,类型相等，属性相等。
- setUserData(operType, key, value, srcNode, destNode):  不是很懂
    1. operType: 1复制，2导入， 3删除，4重命名
    1. key: 数据键
    1. value: 数据值
    1. srcNode 源节点
    1. destNode: 目标节点
- contentDocument: 属性包含一个指针，指向框架内容的文档对象（HTMLFrameElemnt, HTMLIFrameElement:表示框架和内嵌框架）。以前只能通过frames集合进行获取。
```javascript
// 等价这个方法 ： document.implementation.hasFeature("Core","3.0");
if (document.body.isSupport('HTML', '2.0')) {

}

// isSameNode 和isEqualNode
var div1 = document.createElement('div');
div1.setAttribute('class', 'box');

var div2 = document.createElement('div');
div2.setAttribute('class', "box");
console.log(div1.isSameNode(div1)); // true
console.log(div1.isEqualNode(div2)); // true
console.log(div1.isSameNode(div2)); // false

var div = document.creatElement('div');
div.setUserData('name', "Nicholas", function(operation, key, value, src, dest) {
    if (operation == 1) {
        dest,setUserData(key, value, function(){}l)
    }
});
var newDiv = div.cloneNode(true);
console.log(newDiv.getUserData('name'));

// 框架变化
var iframe = document.getElementById('myIframe');
var iframeDoc = iframe.contentDocument; // IE8以前无效
```

# 样式
```javascript
// 判断支持css的能力
document.implementation.hasFeature('css', '2.0');
document.implementation.hasFeature('css2', '2.0'); 
```
## js访问元素样式
css 中使用下划线分割,在js中使用驼峰大小写形式访问。但是特殊字符float浮动，由于是关键字，因此使用cssFloat进行访问,IE使用styleFlocat.
```javascript
var el = document.getElementById('myId');
// background-color
el.style.backgroundColor = '#fff';

// color
el.style.color = 'red';

// font-family
el.style.fontFamily = ''Arial;

// 对于float访问
 var value = el.cssFlocat || el.styleFlocat;
```
## Element 的 style
- cssText: 访问style特性中的css代码，修改情况会替换所有的style的内容。
- length: css属性的数量
- parentRule: 表示CSS需不需要的CSSRule对象
- getPropertyCSSValue(propertyName): 返回包含给定属性值得CSSValue对象
- getPropertyPriority(propertyName): 如果给定的属性使用了!important设置，则返回'important'，否则返回空字符串.
    1. CSStEXT: 返回值等于getPropertyValue()
    1. cssValueType: 0 继承的值，1基本的值， 2致列表， 3自定义的值
- getPropertyValue(propertyName): 返回给定属性的字符串值
- item(index): 返回给定位置的css属性的名称
- removeProperty(propertyName): 从央视中删除给定的属性
- setProperty(propertyName, value, priority): 将给定属性设置为相应的值，并加上优先权标志('important'或空字符串)。
```javascript
var el = document.createElement('myId');
el.style.cssText = 'width: 200px; height: 300px; color: red';
for(i = 0; i < el.style.length; i++) {
    console.log(el.style.item(i)) // 打印出width, height color
}
// console.log(el.style.getPropertyCSSValue('color')); // Chrome没有这个方法
```
## 计算样式
- document.defaultView.getComputedStyle(): 会计算出当前节点的样式(包括继承过来的最终样式)
- currentStyle: IE使用这个属性等价于getComputedStyle()
```javascript
var el = document.getElementById('myId');
var computedStyle = document.defaultView.getComputedStyle(el); 
console.log(computedStyle.width, computedStyle.height);

var currentStyle = el.currentStyle;
console.log(currentStyle.width, currentStyle.height);
```

## 操作样式表
CSSStyleSheet类型表示样式表，包括通过`<link>`元素包含的样式表和在`<style>`中定义的样式表。分别使用HTMLLinkElement, HTMLStyleElement类型表示。测试是否支持DOM2级样式表
```javascript
document.implemetation.hasFeature('StyleSheets', '2.0');
```

