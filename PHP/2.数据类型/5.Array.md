# 1. Array 类型
数组是一个有序映射，将values关联到keys的类型。可以将其当做`列表、散列表、字典、集合、栈、队列`等。此外，数组的值可能是一个数组，因此树形结构和多位数组也是允许的。<br>

# 2. 数组定义和访问
`key` 可以是整数或者字符串。如果不满足，会进行强制转换：
- 合法十进制整型字符串，会直接转为整型。 `"8" => 8` 
- 浮点数： 去掉小数点被转为整型
- 布尔值： 被转为整型，true为1，false为0
- NULL: 被转为空字符串""
- 数组和对象不能作为键，坚持这样会警告：`Illegal offset type`<br>

`value` 可以是任意类型的值。<br>
```php
// - 最后一个`,`逗号可以省略
array( key => value
,key2 => value,
.....
)
```
数组的简写方式`[]`,可替代`array()`。相同的`key`，值会被覆盖。没有`key`的属性，会将`当前最大索引+1`,存储数据。同时数组同`array[key]`进行访问。
```php
$arr = [
    "foo"=> "bar",
    "1" => "a",
    "1.5" => "c",
    true => 'd',
    "hello"
]
var_dump($arr[1]); // 输出d
var_dump(2); // 输出"hello"
```
可以直接使用函数或方法的`调用结果`进行数组解引用。不需要在赋值一个变量，再进行数组操作。
```php
function getArray() {
    return [1,2 ,3 ,4];
}
// 直接使用
echo getArray()[1]; 
```

# 3. 数组的修改与删除
通过`[key]`来进行修改。如果访问的数组不存在，会新建一个数组。
```php
$arr = [0=> 0, 1=> 1];
// 修改
$arr[0] = 10;
echo $arr[0]; // 10

// 访问没有的key会新增
$arr['add'] = "add a new item"; 
echo $arr['add']

// 删除数组
unset($arr[1]);
print_r($arr); // 结构中不再有索引为1的数据
```
数组被删除后，再新增数据，该起始索引不会从`0[你期望被删除后索引同时也能不存在]`开始，而是从之前上次数组已有的索引开始。<br>
`unset()` 函数允许删除数组中的某个键。但要注意数组将不会重建索引。如果需要删除后重建索引，可以用 `array_values()` 函数。
```php
$arr = [1,2,3,4,5];
unset(4); // 移除了索引为4的item
print_r($arr); // 不存在索引为4的item


// 添加一个新item
$arr[] = 6;
print_r($arr);
// 结构中索引为5，而不是4
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 4
    [5] => 6
)

//重建索引
$arr_reC = array_values($arr);
print_r($arr_reC);
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 4
    [4] => 6
)
```
# 4. 数组的其他访问方式
数组方法：http://php.net/manual/zh/ref.array.php
```php
$arr = array('fruit' => 'apple', 'veggie' => 'carrot');
// 正确访问方式
echo $arr['fruit']; // apple

// 能运行，是因为 PHP 自动将裸字符串（没有引号的字符串且不对应于任何已知符号）转换成一个其值为该裸字符串的正常字符串。
print $arr[veggie];   // carrot。 不建议使用

// 通过变量方式访问
define('fruit', 'veggie');
echo $arr[fruit]; // carrot

// 表达式方式访问
function getFruit() {
    return 'fruit';
}
echo $arr[getFruit()]; // apple
```

# 5. 类型转换
在值的前面使用`(array)`转换。<br>
对于任意 integer，float，string，boolean 和 resource 类型，如果将一个值转换为数组，将得到一个仅有一个元素的数组，其下标为 0，该元素即为此标量的值。<br>
NULL 会是一个空数组<br>
如果一个 object 类型转换为 array，则结果为一个数组，其单元为该对象的属性。键名将为成员变量名。例外情况：
- 整数属性不可访问
- 私有变量前会加上类名做前缀，前缀的前后都各有一个 NULL 字符
- 保护变量前会加一个`*`做前缀，前缀的前后都各有一个 NULL 字符
```php
// integer作为数组
$i = (array)10;
print_r($i); // [0] => 10

// float作为数组
$f = (array)10.1;
print_r($f); // [0] => 10.1

// string作为数组
$s = (array)'hello';
print_r($s); // [0] => 'hello'

// boolean作为数组
$b = (array)true;
print_r($b); // [0] => 1

// null 转为数组
$n = (array)NULL;
print_r($n); // []，空数组

// 对象转为数组
class A {
    private $A = "private_A";
    public $B = "public_B";
    protected $C = "protected_C";
}
print_r((array)new A());
// (
//     [ A A] => private_A
//     [B] => public_B
//     [ * C] => protected_C
// )

// resource作为数组，还不知道怎么写
```

# 6. 数组的使用
作为集合使用
```php
$colors = ['red','blue','green','yellow'];
foreach($colors as $color) {
    echo "Do you like $color?\n";
}
```
在循环中改变数组值
```php
$colors = ['red','blue','green','yellow'];
foreach($colors as $key => $color) {
    // 内容转为大写
    $colors[$key] = strtoupper($color);
}
print_r($colors);
```
从下标`1`开始的数组
```php
$firstquarter  = array(1 => 'January', 'February', 'March');
print_r($firstquarter);
```
数组的拷贝
```php
$arr1 = [1, 2];
$arr2 = $arr1;
$arr2[] = 3; 
print_r($arr1); // 1,2
print_r($arr2); // 1.2.3

$arr3 = &$arr1;
$arr3[] = 4;
print_r($arr1); // 1, 2, 4
```